{% extends "_layout.html" %}
{% block title %}Settings — Configuration{% endblock %}
{% block content %}
<main class="cc-panel">
  <h1>Settings</h1>

  <section class="cc-card">
    <h2>Models</h2>
    <ul>
      <li>Build model: {{ settings.openai_model_build }}</li>
      <li>Fix model: {{ settings.openai_model_fix }}</li>
      <li>Know model: {{ settings.openai_model_know }}</li>
      <li>Embedding model: {{ settings.embed_model }}</li>
    </ul>
  </section>

  <section class="cc-card">
    <h2>Database</h2>
    <p>Type: {{ settings.db_type }}</p>
    <p>URI (preview): {{ settings.db_uri_preview }}</p>
    <p class="cc-text-muted">Full credentials are never shown in the UI.</p>
  </section>

  <section class="cc-card">
    <h2>Development data</h2>
    <p class="cc-text-muted">
      Initialise demo users and office data for testing roster, schedule,
      maintenance, and Machine Room views.
    </p>

    <form method="post" action="{{ url_for('admin_dev_seed') }}">
      <button type="submit" class="cc-btn cc-btn--danger">
        Initialise dev database
      </button>
    </form>

    <p class="cc-text-muted">
      For dev / staging only. Safe to run more than once; existing rows are preserved.
    </p>
  </section>

  <section class="cc-card" id="voice-preferences-card">
    <h2>Voice Preferences</h2>
    <p class="cc-text-muted">Stored in this browser only. Choose the voice that feels clearest to you.</p>

    <div class="cc-field">
      <label for="voice-select">Preferred voice</label>
      <select id="voice-select" name="voice-select">
        <option>Loading voices…</option>
      </select>
    </div>

    <div class="cc-card-actions">
      <button class="cc-btn cc-btn--primary" id="voice-save" type="button">Save voice</button>
    </div>

    <p id="voice-save-message" class="cc-text-muted"></p>
    <p id="voice-unsupported" class="cc-text-muted" style="display:none;">Speech synthesis is not available in this browser. Try Chrome or Edge.</p>
  </section>
</main>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    if (window.BrainVoicePreferences && window.BrainVoicePreferences.initSettingsUI) {
      window.BrainVoicePreferences.initSettingsUI();
    }
  });
</script>
{% endblock %}
