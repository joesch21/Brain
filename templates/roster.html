{% extends "_layout.html" %}
{% block title %}Roster â€” Office Manager{% endblock %}
{% block content %}
<style>
  .card { background: var(--elev); border: 1px solid var(--line); border-radius: var(--radius); padding: var(--pad); box-shadow: var(--shadow); }
  .btn-primary { background: var(--accent); color: var(--accent-ink); border: none; border-radius: 12px; padding: 0.6rem 1rem; font-weight: 600; text-decoration: none; }
  .btn-primary:hover, .btn-primary:focus { filter: brightness(1.05); }
  .btn-secondary { border: 1px solid var(--line); color: var(--text); border-radius: 12px; padding: 0.5rem 1rem; text-decoration: none; }
  .roster-table { width: 100%; border-collapse: collapse; }
  .roster-table th, .roster-table td { padding: 0.75rem 0.5rem; border-bottom: 1px solid var(--line); text-align: left; }
  .roster-table th { color: var(--muted); font-weight: 600; }
  .link-small { color: var(--accent); text-decoration: none; font-size: 0.95rem; }
  .link-small:hover, .link-small:focus { text-decoration: underline; }
  .link-danger { color: var(--danger); }
  .link-disabled { color: var(--muted); font-size: 0.95rem; }
  .actions { display: flex; gap: 0.5rem; align-items: center; }
  .status-pill { display: inline-flex; align-items: center; padding: 0.25rem 0.6rem; border-radius: 999px; background: var(--line); color: var(--text); font-size: 0.9rem; }
  .page-toolbar { position: static; padding: 0; margin-bottom: 1rem; background: transparent; border-bottom: none; display: flex; align-items: center; gap: 1rem; }
  .cc-toolbar-actions { display: flex; gap: 0.5rem; margin-left: auto; }
</style>

{% set current_role = get_current_role() %}
<div class="cc-toolbar page-toolbar">
  <h1>Roster</h1>
  {% if current_role in ["supervisor", "admin"] %}
    <div class="cc-toolbar-actions">
      <a href="{{ url_for('admin_import_index') }}" class="btn-secondary">
        Import Roster / Flights
      </a>
    </div>
  {% endif %}
</div>

<section class="card">

  <div class="table-wrapper">
    <table class="roster-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Name</th>
          <th>Role</th>
          <th>Shift</th>
          <th>Truck</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        {% for entry in roster_entries %}
        <tr>
          <td>{{ entry.date }}</td>
          <td>{{ entry.employee_name }}</td>
          <td>{{ entry.role or '-' }}</td>
          <td>
            {% if entry.shift_start or entry.shift_end %}
              {{ entry.shift_start or "" }} - {{ entry.shift_end or "" }}
            {% else %}
              -
            {% endif %}
          </td>
          <td>{{ entry.truck or '-' }}</td>
          <td>{{ entry.notes or '-' }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
